<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.85.0" />
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Settings :: Azure Reaper</title>

    
    <link href="/css/nucleus.css?1625650244" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1625650244" rel="stylesheet">
    <link href="/css/hybrid.css?1625650244" rel="stylesheet">
    <link href="/css/featherlight.min.css?1625650244" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1625650244" rel="stylesheet">
    <link href="/css/auto-complete.css?1625650244" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1625650244" rel="stylesheet">
    <link href="/css/theme.css?1625650244" rel="stylesheet">
    <link href="/css/tabs.css?1625650244" rel="stylesheet">
    <link href="/css/hugo-theme.css?1625650244" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1625650244"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
<link rel="stylesheet" href="/css/own.css">
  </head>
  <body class="" data-url="/started/settings/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <img src="/images/azreaper.svg" />
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1625650244"></script>
<script type="text/javascript" src="/js/auto-complete.js?1625650244"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/example.org\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1625650244"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='/'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/started/" title="Getting Started" class="dd-item
        parent
        
        
        ">
      <a href="/started/">
          <i class="fas fa-play"></i> Getting Started
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/started/infrastructure/" title="Infrastructure" class="dd-item ">
        <a href="/started/infrastructure/">
        Infrastructure
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/started/settings/" title="Settings" class="dd-item active">
        <a href="/started/settings/">
        Settings
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/started/subscriptions/" title="Subscriptions" class="dd-item ">
        <a href="/started/subscriptions/">
        Subscriptions
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/started/tags/" title="Tags" class="dd-item ">
        <a href="/started/tags/">
        Tags
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/maintenance/" title="Maintenance" class="dd-item
        
        
        
        ">
      <a href="/maintenance/">
          <i class="fas fa-cog"></i> Maintenance
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/maintenance/tags/" title="Setting Tags" class="dd-item ">
        <a href="/maintenance/tags/">
        Setting Tags
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/maintenance/upgrade/" title="Function Upgrade" class="dd-item ">
        <a href="/maintenance/upgrade/">
        Function Upgrade
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/api/" title="API" class="dd-item
        
        
        
        ">
      <a href="/api/">
          <i class='fas fa-rocket'></i> API
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/api/authentication/" title="Authentication" class="dd-item ">
        <a href="/api/authentication/">
        Authentication
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/api/swagger/" title="Swagger" class="dd-item ">
        <a href="/api/swagger/">
        Swagger
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Azure Reaper</a> > <a href='/started/'>Getting Started</a> > Settings
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#upload-api-settings">Upload API Settings</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Settings
            </h1>
          

        


<h4 id="reaper-depends-on-a-few-settings-all-of-the-settings-are-stored-in-the-backend-cosmosdb-database-and-some-of-them-can-be-overridden-by-tags-on-the-resource">Reaper depends on a few settings. All of the settings are stored in the backend CosmosDB database, and some of them can be overridden by tags on the resource.</h4>
<h2 id="upload-api-settings">Upload API Settings</h2>
<p>Once the deployment has been completed the Reaper needs to be configured with some default settings.  A lot of these settings can be overridden using the user tags, but when these do not occur on a resource group there has to be a value that Reaper can use.</p>
<p>The main <a href="https://github.com/russellseymour/azure-reaper">github.com/russellseymour/azure-reaper</a> repository has two files which contain the default values for the settings and the timezones.</p>
<ol>
<li><a href="https://github.com/russellseymour/azure-reaper/master/data/settings.json">https://github.com/russellseymour/azure-reaper/master/data/settings.json</a></li>
<li><a href="https://github.com/russellseymour/azure-reaper/master/data/timezones.json">https://github.com/russellseymour/azure-reaper/master/data/timezones.json</a></li>
</ol>
<p>In order to access the API, the function key needs to be retrieved, please refer to the <a href="/docs/API/authentication/">API Authentication</a> page for more information.</p>
<p>The easiest way to upload the necessary items is to use the command line. The following examples show how this can be done using both <code>curl</code> and <code>powershell</code>.</p>

<div class="notices note" ><p>In both cases a dummy API token is being used for the authentication. The URL for the Azure Reaper endpoint will depend on where the function was deployed to and the parameters that were used.</p>
</div>



<div class="tab-panel">
    <div class="tab-nav">
    
        <button
          data-tab-item="Curl"
          data-tab-group="settings"
          class="tab-nav-button btn active"
          onclick="switchTab('settings','Curl')"
         >Curl</button>
    
        <button
          data-tab-item="PowerShell"
          data-tab-group="settings"
          class="tab-nav-button btn "
          onclick="switchTab('settings','PowerShell')"
         >PowerShell</button>
    
    </div>
    <div class="tab-content">
        
        <div data-tab-item="Curl" data-tab-group="settings" class="tab-item active">
            <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Download the two files to the local machine</span>
curl https://github.com/russellseymour/azure-reaper/master/data/settings.json -o settings.json
curl https://github.com/russellseymour/azure-reaper/azure-reaper/master/data/timezones.json -o timezones.json

<span style="color:#75715e"># Upload the settings to the API</span>
curl -H <span style="color:#e6db74">&#34;x-functions-key: functiontoken123!&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>     -X POST <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>     -d @settings.json <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>     https://azure-reaper.azurewebsites.net/api/v1/settings

<span style="color:#75715e"># Upload the timezones to the API</span>
curl -H <span style="color:#e6db74">&#34;x-functions-key: functiontoken123!&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>     -X POST <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>     -d @timezones.json <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>     https://azure-reaper.azurewebsites.net/api/v1/timezones
</code></pre></div>
        </div>
        
        <div data-tab-item="PowerShell" data-tab-group="settings" class="tab-item ">
            <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#75715e"># Download the two files to the local machine</span>
Invoke-RestMethod -Uri https<span style="color:#960050;background-color:#1e0010">:</span>//github.com/russellseymour/azure-reaper/master/data/settings.json -OutFile settings.json
Invoke-RestMethod -Uri https<span style="color:#960050;background-color:#1e0010">:</span>//github.com/russellseymour/azure-reaper/master/data/timezones.json -OutFile timezones.json

<span style="color:#75715e"># Upload the settings to the API</span>
Invoke-RestMethod -Method POST `
                  -Headers @{<span style="color:#e6db74">&#34;x-functions-key&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;functiontoken123!&#34;</span>} `
                  -Body (Get-Content -Path settings.json -raw) `
                  -Uri <span style="color:#e6db74">&#34;https://azure-reaper.azurewebsites.net/api/v1/settings&#34;</span>

<span style="color:#75715e"># Upload the timezones to the API</span>
Invoke-RestMethod -Method POST `
                  -Headers @{<span style="color:#e6db74">&#34;x-functions-key&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#e6db74">&#34;functiontoken123!&#34;</span>} `
                  -Body (Get-Content -Path timezones.json -raw) `
                  -Uri <span style="color:#e6db74">&#34;https://azure-reaper.azurewebsites.net/api/v1/timezones&#34;</span>

</code></pre></div>
        </div>
        
    </div>
</div>



<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/started/infrastructure/" title="Infrastructure"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/started/subscriptions/" title="Subscriptions" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1625650244"></script>
    <script src="/js/perfect-scrollbar.min.js?1625650244"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1625650244"></script>
    <script src="/js/jquery.sticky.js?1625650244"></script>
    <script src="/js/featherlight.min.js?1625650244"></script>
    <script src="/js/highlight.pack.js?1625650244"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1625650244"></script>
    <script src="/js/learn.js?1625650244"></script>
    <script src="/js/hugo-learn.js?1625650244"></script>
    
        
            <script src="/mermaid/mermaid.js?1625650244"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

