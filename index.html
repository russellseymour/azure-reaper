<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.85.0" />
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Azure Reaper :: Azure Reaper</title>

    
    <link href="/css/nucleus.css?1625650244" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1625650244" rel="stylesheet">
    <link href="/css/hybrid.css?1625650244" rel="stylesheet">
    <link href="/css/featherlight.min.css?1625650244" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1625650244" rel="stylesheet">
    <link href="/css/auto-complete.css?1625650244" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1625650244" rel="stylesheet">
    <link href="/css/theme.css?1625650244" rel="stylesheet">
    <link href="/css/tabs.css?1625650244" rel="stylesheet">
    <link href="/css/hugo-theme.css?1625650244" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1625650244"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
<link rel="stylesheet" href="/css/own.css">
  </head>
  <body class="" data-url="/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <img src="/images/azreaper.svg" />
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1625650244"></script>
<script type="text/javascript" src="/js/auto-complete.js?1625650244"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/example.org\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1625650244"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='/'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/started/" title="Getting Started" class="dd-item
        
        
        
        ">
      <a href="/started/">
          <i class="fas fa-play"></i> Getting Started
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/started/infrastructure/" title="Infrastructure" class="dd-item ">
        <a href="/started/infrastructure/">
        Infrastructure
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/started/settings/" title="Settings" class="dd-item ">
        <a href="/started/settings/">
        Settings
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/started/subscriptions/" title="Subscriptions" class="dd-item ">
        <a href="/started/subscriptions/">
        Subscriptions
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/started/tags/" title="Tags" class="dd-item ">
        <a href="/started/tags/">
        Tags
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/maintenance/" title="Maintenance" class="dd-item
        
        
        
        ">
      <a href="/maintenance/">
          <i class="fas fa-cog"></i> Maintenance
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/maintenance/tags/" title="Setting Tags" class="dd-item ">
        <a href="/maintenance/tags/">
        Setting Tags
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/maintenance/upgrade/" title="Function Upgrade" class="dd-item ">
        <a href="/maintenance/upgrade/">
        Function Upgrade
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/api/" title="API" class="dd-item
        
        
        
        ">
      <a href="/api/">
          <i class='fas fa-rocket'></i> API
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/api/authentication/" title="Authentication" class="dd-item ">
        <a href="/api/authentication/">
        Authentication
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/api/swagger/" title="Swagger" class="dd-item ">
        <a href="/api/swagger/">
        Swagger
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          

        

<span id="sidebar-toggle-span">
<a href="#" id="sidebar-toggle" data-sidebar-toggle=""><i class="fas fa-bars"></i> navigation</a>
</span>

 
<h1 id="azure-reaper">Azure Reaper</h1>
<p>Azure Reaper is a way of reducing costs in Azure subscriptions as well as automatically tagging ownership of resource groups.</p>
<p>Azure is a great place to play around with new things and test deployments of code on infrastructure, however more often than not these resources are not deleted so they incur an ongoing cost, such as a virtual machines and Kubernetes nodes.</p>

<div class="notices note" ><p>The Azure Reaper can only manage AKS clusters that are using Scale Sets. The ability to shutdown an AKS cluster is not available to those clusters running as an Availability Set.</p>
</div>

<p>Reaper helps to keep down costs by:</p>
<ul>
<li>Shutting down machines when they are not being used, and starting them up again</li>
<li>Deleting resources that have expired</li>
</ul>
<p>Azure Reaper runs as an Azure Function and has the following main components.</p>
<div class="row show-grid">
<div class="col-xs-4  border-green "><h2 id="tagger">Tagger</h2>
<p>Whenever a new resource group is created an event is created which is put onto a queue. This message is read by Azure Reaper and uses the information to tag the group with:</p>
<ul>
<li>Owner Name</li>
<li>Owner Email</li>
<li>Creation Date</li>
</ul>
<p><img src="/images/resource_group_tagged.png" alt="Tagged Resource Group"></p>
<p>This helps to identify who has owns the group and allows the Reaper to determine when the group has expired and should be deleted.</p>
</div>
<div class="col-xs-4  border-blue "><h2 id="timer">Timer</h2>
<p>Every 10 minutes, by default, the reaper runs to determine which resources need to be shutdown or deleted.</p>
<p>The Reaper function can also be triggered manually by using the API.</p>
</div>
<div class="col-xs-4  border-purple "><h2 id="api">API</h2>
<p>All of the configuration for Reaper is stored in a storage account using the Azure CosmosDB API. These settings can be managed using the Reaper API. It also has a Swagger UI.</p>
<p><img src="/images/swagger.png" alt="Swagger UI"></p>
<p>Additional functions, such as the Reaper, can be called on an ad-hoc basis.</p>
</div>
</div>
	
  
        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
		
			<a class="nav nav-next" href="/started/" title="Getting Started" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1625650244"></script>
    <script src="/js/perfect-scrollbar.min.js?1625650244"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1625650244"></script>
    <script src="/js/jquery.sticky.js?1625650244"></script>
    <script src="/js/featherlight.min.js?1625650244"></script>
    <script src="/js/highlight.pack.js?1625650244"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1625650244"></script>
    <script src="/js/learn.js?1625650244"></script>
    <script src="/js/hugo-learn.js?1625650244"></script>
    
        
            <script src="/mermaid/mermaid.js?1625650244"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

